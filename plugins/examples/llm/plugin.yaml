name: LLM Plugin
version: 1.0.0
description: 大语言模型集成插件，支持多种LLM提供商
author: XiaoZhi Flow Team
type: llm
tags:
  - llm
  - ai
  - chat
  - completion
capabilities:
  - chat_completion
  - text_completion
  - embedding
  - fine_tuning
  - function_calling
  - streaming
dependencies:
  - openai-sdk
  - anthropic-sdk
  - azure-openai
metadata:
  language: go
  created_at: "2024-01-01T00:00:00Z"
  supported_providers:
    - openai
    - anthropic
    - azure
    - local
  model_types:
    - chat
    - completion
    - embedding

deployment:
  type: local_binary
  path: ./main.go
  resources:
    max_memory: "1Gi"
    max_cpu: "500m"
  timeout: 120s
  retry_count: 3

config:
  # 默认模型配置
  default_model: "gpt-3.5-turbo"
  default_max_tokens: 1000
  default_temperature: 0.7
  default_top_p: 1.0

  # OpenAI配置
  openai:
    api_key: ""
    organization: ""
    base_url: "https://api.openai.com/v1"
    timeout: 60s
    max_retries: 3

  # Anthropic配置
  anthropic:
    api_key: ""
    base_url: "https://api.anthropic.com"
    timeout: 60s
    max_retries: 3

  # Azure OpenAI配置
  azure:
    api_key: ""
    endpoint: ""
    api_version: "2023-12-01-preview"
    deployment_name: ""
    timeout: 60s
    max_retries: 3

  # 本地模型配置
  local:
    base_url: "http://localhost:8080"
    model_path: ""
    timeout: 120s
    max_retries: 1

  # 限制和配额
  limits:
    max_messages_per_request: 50
    max_tokens_per_request: 4000
    max_requests_per_minute: 60
    max_tokens_per_minute: 40000

  # 成本控制
  cost_control:
    daily_budget: 10.0
    cost_per_1k_tokens:
      openai:
        "gpt-4": 0.03
        "gpt-4-turbo": 0.01
        "gpt-3.5-turbo": 0.001
      anthropic:
        "claude-3-opus": 0.015
        "claude-3-sonnet": 0.003
        "claude-3-haiku": 0.00025

  # 缓存配置
  cache:
    enabled: true
    ttl: 3600
    max_size: "500Mi"
    similarity_threshold: 0.95

  # 安全配置
  safety:
    content_filter: true
    prompt_validation: true
    output_validation: true
    max_request_size: "10Mi"

environment:
  PLUGIN_LOG_LEVEL: "info"

  # OpenAI
  OPENAI_API_KEY: ""
  OPENAI_ORGANIZATION: ""

  # Anthropic
  ANTHROPIC_API_KEY: ""

  # Azure OpenAI
  AZURE_OPENAI_API_KEY: ""
  AZURE_OPENAI_ENDPOINT: ""
  AZURE_OPENAI_DEPLOYMENT_NAME: ""

  # 本地模型
  LOCAL_LLM_BASE_URL: "http://localhost:8080"
  LOCAL_LLM_MODEL_PATH: ""

  # 成本控制
  DAILY_BUDGET: "10.0"

enabled: true